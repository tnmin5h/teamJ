# Team J
> 202101613 양채은

> 202101614 오수민

## 허프만 압축

> 문자의 발생 빈도 또는 확률 등을 이용하여 압축하는 방법


* 파일에 문자를 넣는다고 가정해보자.

  * 유니 코드: 한글이 포함된 문자를 표현하는 상황 -> 16 bit 사용
  
  * 아스키 코드: 영어만 포함된 문자를 표현하는 상황 -> 8 bit 사용


**입력**: 입력 파일의 n개의 문자에 대한 각의 빈도수

![test파일 이미지](https://github.com/akizakic/akizakic.github.io/blob/main/KakaoTalk_20220414_171350677.png?raw=true)

위의 이미지는 압축할 테스트 파일의 이미지이다.

파일을 입력받을 때, 파일을 가리키기 위한 용도로 FILE 구조체를 이용한다.
이 포인터를 이용해 파일에 데이터를 저장 또는 저장된 데이터를 읽는다.
(ex)
* 출력 스트림 - FILE * fp = fopen("data.txt" , "wt");
* 입력 스트림 - FILE * fp = fopen("data.txt" , "rt");

이를 이용하여 파일의 데이터를 불러와 str이라는 배열로 받아왔다.

**출력**: 허프만 트리

1. 각 문자에 대한 노드 생성 후, 그 문자의 빈도수를 노드에 저장한다.
2. 생성한 노드를 힙에 삽입한다.
4. 노드 2개씩 빼가며 그 값들을 더한다.
5. 트리로 구성된 노드를 힙에 삽입한다. (InsertHeap)
6. 힙에서 데이터를 꺼내가며 트리를 완성한다. (DeleteHeap) 

*힙에 있는 노드의 수가 2개 이상인 경우 위의 과정 일부 반복*

![실행결과](https://github.com/akizakic/akizakic.github.io/blob/main/%EC%8B%A4%ED%96%89%EA%B2%B0%EA%B3%BC.png?raw=true)


## 파일 압축

> 최대한 적은 비트로 문자를 표현해야 한다.

  : 자주 출현하는 문자에 적은 비트를 할당한다.

  : 적게 출현하는 문자에 많은 비트를 할당한다.

    -> `트리 구조` 를 사용한다.
  
  
## 허프만 압축 알고리즘

* 출현 빈도가 가장 낮은 두 문자를 택한 후 1개로 합치는 과정을 진행한다.

* 왼쪽: 빈도수 낮음 / 오른쪽: 빈도수 높음

* 빈도수가 동일할 경우, 작은 것부터 우선 연결

* 허프만 트리 생성 후, 차례로 0 & 1 부여


## 허프만 트리 

(예) e(5개) f(6개) d(10개) b(13개) c(20개) a(26개) 가 있다고 가정하면,

아래의 그림과 같이 허프만 트리가 완성된다.  

![허프만 트리](https://t1.daumcdn.net/cfile/tistory/99E80B395C34ACB80E) 

이 트리를 바탕으로 하여, 각 문자에 이진코드를 부여할 수 있다.


## 허프만 코드 인코딩 과정

1. 문자 출현 빈도수 계산

2. 계산되어진 빈도수를 바탕으로 `허프만 트리` 생성

3. 문자에 이진 코드 부여

4. 문자의 코드화

5. 압축 진행

## 허프만 코드 디코딩 과정

: 허프만 트리와 문자에 이진 코드를 부여한 것을 기반으로 복호화하는 과정

1. bit 단위로 읽으면서 트리를 따라 간다.

2. 문자가 나올 때까지 문자열로 치환해준다.

## 시간 복잡도
초기에 힙을 구성하는 데 O(n) 시간이 걸리고, 최솟값 제거 및 새로운 원소의 삽입 등 heap 연산은 O(logn) 시간이 걸린다. for 루프는 n-1번 수행되기 때문에 알고리즘의 전체 수행 시간은 O(nlogn)이 된다.
